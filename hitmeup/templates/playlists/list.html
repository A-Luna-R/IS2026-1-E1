{% extends "base.html" %}
{% block content %}
<h2>Playlists</h2>

<nav>
    {% if user.is_authenticated %}
      <a href="{% url 'playlist_create_user' %}">Crear Playlists</a>
      {% endif %}
  </nav>

{% if playlists %}
  <ul>
  {% for p in playlists %}
    <li>
      <a href="{% url 'playlist' p.id %}">
        <strong>{{ p.name }}</strong>
      </a>

      {% if p.description %}
        <br><small>{{ p.description }}</small>
      {% endif %}
      <br><small>Creada: {{ p.created_at|date:"Y-m-d H:i" }}</small>

      {# --- Botones de like --- #}
      {% if user.is_authenticated %}
        <div style="margin-top:.3rem">
          {% if p.id in liked_user_ids %}
            <a href="{% url 'playlist_like_user' p.id %}">ğŸ’” (usuario)</a>
          {% else %}
            <a href="{% url 'playlist_like_user' p.id %}">â¤ï¸ (usuario)</a>
          {% endif %}

          {% if has_artist %}
            {% if p.id in liked_artist_ids %}
              &nbsp;|&nbsp; <a href="{% url 'playlist_like_artist' p.id %}">ğŸ’” (artista)</a>
            {% else %}
              &nbsp;|&nbsp; <a href="{% url 'playlist_like_artist' p.id %}">â¤ï¸ (artista)</a>
            {% endif %}
          {% endif %}
        </div>
      {% endif %}
      {# ------------------------ #}

    </li>
  {% endfor %}
  </ul>
{% else %}
  <p>AÃºn no hay playlists.</p>
{% endif %}
{% endblock %}
