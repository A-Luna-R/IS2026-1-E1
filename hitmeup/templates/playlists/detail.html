{% extends "base.html" %}
{% block content %}
<h2>{{ playlist.name }}</h2>
{% if playlist.description %}<p>{{ playlist.description }}</p>{% endif %}

{% if user.is_authenticated %}
  <div style="margin:.5rem 0">
    {% if liked_user %}
      <a href="{% url 'playlist_like_user' playlist.id %}">ğŸ’” Quitar like (usuario)</a>
    {% else %}
      <a href="{% url 'playlist_like_user' playlist.id %}">â¤ï¸ Me gusta (usuario)</a>
    {% endif %}

    {% if has_artist %}
      {% if liked_artist %}
        &nbsp;|&nbsp; <a href="{% url 'playlist_like_artist' playlist.id %}">ğŸ’” Quitar like (artista)</a>
      {% else %}
        &nbsp;|&nbsp; <a href="{% url 'playlist_like_artist' playlist.id %}">â¤ï¸ Me gusta (artista)</a>
      {% endif %}
    {% endif %}
  </div>
{% endif %}

{% if user.is_authenticated %}
  {% if playlist.owner_user and playlist.owner_user.id == user.id %}
    <p>
      <a href="{% url 'playlist_edit_user' playlist.id %}">âœï¸ Editar playlist</a>
      &nbsp;|&nbsp;
      <a href="{% url 'playlist_delete_user' playlist.id %}">ğŸ—‘ï¸ Eliminar playlist</a>
    </p>
  {% elif playlist.owner_artist and user.artist_profile and user.artist_profile.id == playlist.owner_artist.id %}
    <p>
      <a href="{% url 'playlist_edit_artist' playlist.id %}">Editar playlist (artista)</a>
      &nbsp;|&nbsp;
      <a href="{% url 'playlist_delete_artist' playlist.id %}">Eliminar playlist (artista)</a>
    </p>
  {% endif %}
{% endif %}

<p><a href="{% url 'playlists_list' %}">ğŸ”™ Volver a mis playlists</a></p>

{% if songs %}
  <ul>
  {% for s in songs %}
    <li>
      <strong>{{ s.title }}</strong>
      {% if s.artist %} â€“ {{ s.artist }}{% endif %}
      <br>
      <audio controls src="{{ s.audio.url }}"></audio>
    </li>
  {% endfor %}
  </ul>
{% else %}
  <p>Esta playlist no tiene canciones.</p>
{% endif %}
{% endblock %}
