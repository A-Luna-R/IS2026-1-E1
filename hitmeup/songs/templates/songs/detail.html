{% extends "base.html" %}
{% block content %}
<h2>{{ song.title }}{% if song.artist %} â€” <em>{{ song.artist }}</em>{% endif %}</h2>
<p><small>Subida por: {{ song.owner.username }} Â· {{ song.created_at|date:"Y-m-d H:i" }}</small></p>

<audio controls src="{{ song.audio.url }}"></audio>

<p style="margin-top:.5rem">
  <small>â¤ï¸ usuarios: {{ likes_users }} Â· â¤ï¸ artistas: {{ likes_artists }}</small>
</p>

{% if user.is_authenticated %}
  <div style="margin-top:.5rem">
    {% if liked_user %}
      <a href="{% url 'songs_like_user' song.id %}">ğŸ’” Quitar like (usuario)</a>
    {% else %}
      <a href="{% url 'songs_like_user' song.id %}">â¤ï¸ Me gusta (usuario)</a>
    {% endif %}

    {% if has_artist %}
      {% if liked_artist %}
        &nbsp;|&nbsp; <a href="{% url 'artist_toggle_like' user.artist_profile.id song.id %}">ğŸ’” Quitar like (artista)</a>
      {% else %}
        &nbsp;|&nbsp; <a href="{% url 'artist_toggle_like' user.artist_profile.id song.id %}">â¤ï¸ Me gusta (artista)</a>
      {% endif %}
    {% endif %}
  </div>

  <!-- NUEVA SECCIÃ“N: Reportar canciÃ³n -->
  <p style="margin-top:.75rem">
    <a href="{% url 'abuse_report_song' song.id %}">âš ï¸ Reportar esta canciÃ³n</a>
  </p>
{% endif %}

<p style="margin-top:1rem"><a href="{% url 'songs_explore' %}">â† Volver a explorar</a></p>
{% endblock %}
